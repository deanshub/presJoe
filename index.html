<!DOCTYPE html>
<html ng-app="presJoe" dir="rtl">
<head>
	<title>Welcome to Dean Shub's world</title>
	<meta charset="utf-8">
	<link rel="stylesheet" href="css/globals.css" />
	<link rel="stylesheet" href="css/navbar.css" />
<style>

</style>
</head>
<body ng-controller="navbarController">
	<nav>
		<ul id="navbar" when-scrolled="scrollerPosition" ng-class="{expanded : scroll < 10}">
			<li id="navbar-pres-logo" class="navbar-item">
				Joe:Pres
			</li>
			<li class="navbar-item">
				<a href="#/thoughts">Thoughts</a>
			</li>
			<li class="navbar-item">
				<a href="#/talks">Talks</a>
			</li>
			<li class="navbar-item">
				<a href="#/endorsement">Endorsement</a>
			</li>
			<li class="navbar-item" id="navbar-search">
				<form class="navbar-search">
					<input type="text" class="span2 search-query searchMov" id="search-query" placeholder="חפש"  ng-model="filter.name">
				</form>
			</li>
		</ul>
	</nav>
	
	<div id="topfix" scroll-position="scroll"></div>

	<br>

	<!-- The Thumbnails will apeare here -->
	<div ng-view>
		Here are the thumbnails
	</div>

<script type="text/javascript" src="js\lib\jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="js\lib\angular.min.js"></script>
<script type="text/javascript">
var presJoe = angular.module('presJoe',[]);

presJoe.directive('scrollPosition', function($window) {
  return function(scope, element, attrs) {
    var windowEl = angular.element($window);
    windowEl.on('scroll', function() {
      scope.$apply(function() {
        scope[attrs.scrollPosition] = windowEl.scrollTop();
      });
    });
  };
});

presJoe.directive('whenScrolled', function() {
    return function(scope, elm, attr) {
        var raw = elm[0];
        elm.bind('scroll', function() {
            if (raw.scrollTop + raw.offsetHeight >= raw.scrollHeight) {
                scope.$apply(attr.whenScrolled);
            }
        });
    };
});

//routes section
presJoe.config(function ($routeProvider) {
	$routeProvider
	.when('/',{
		controller:'simpleCtrl',
		templateUrl: 'views/thoughts.html'
	})
	.when('/talks',{
		controller:'simpleCtrl',
		templateUrl: 'talks.html'
	})
	.when('/thoughts',{
		controller:'simpleCtrl',
		templateUrl: 'views/thoughts.html'
	})
	.when('/endorsments',{
		controller:'simpleCtrl',
		templateUrl: 'endorsments.html'
	})
	.otherwise({redirectTo:'/thoughts'});
});


// controlers section
var controllers = {};

controllers.navbarController = function ($scope) {
	$scope.scroll = 0;
};

controllers.simpleCtrl = function ($scope, $http) {
	$http.get('api_mock/presentations.json').success(function(data) {
		$scope.presentations = data;
	});

	$scope.addPresentation = function() {
		alert("Shtuty");
		$scope.presentation.push({
			thumbnail: title1,
			desc: desc1
		});
	};

	$scope.shtuty = function() {
		alert("Shtuty");
	};	

	$scope.shtuty2 = function() {
		alert("Bye");
	};

	$scope.loadMore = function() {
        for (var i = 0; i < 4; i++) {
            $scope.presentations.push({thumbnail:"bla"+(i+2)+".jpg", desc:i});
        }
    };	
};


presJoe.controller(controllers);
</script>
<!-- http://www.youtube.com/watch?v=i9MHigUZKEM&feature=player_embedded 
49:20
-->
	
</body>
</html>